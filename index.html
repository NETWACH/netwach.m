<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ðŸ“° NetWatch | Home</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="style.css" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <!-- Background overlay -->
  <div class="overlay"></div>

  <!-- Header -->
  <header class="card header">
    <div class="brand"><img src="logo.png" alt="NetWatch logo"/> NetWatch</div>
  </header>

  <!-- Centered Apple-style clock -->
  <div class="clock-wrapper">
    <canvas id="appleClock"></canvas>
  </div>

  <!-- Main -->
  <main class="container" id="home">
    <h1 class="title">ðŸ“° NetWatch</h1>
    <p class="subtitle">A data-driven project to track threats to health safety nets â€“ because it belongs to everyone.</p>

    <!-- iPhone Grid -->
    <div class="iphone-grid">
      <!-- Weather -->
      <div class="iphone-tile weather-tile">
        <div id="wx-icon">â›…</div>
        <div id="wx-temp">--Â°</div>
        <div id="wx-place">Locatingâ€¦</div>
      </div>

      <!-- Executive -->
      <div class="iphone-tile exec-tile">
        <img id="seal" alt="Seal of the President of the United States"
          src="https://upload.wikimedia.org/wikipedia/commons/thumb/3/36/Seal_of_the_President_of_the_United_States.svg/240px-Seal_of_the_President_of_the_United_States.svg.png"/>
        <div class="tile-label">Executive</div>
      </div>

      <!-- Programs -->
      <div class="iphone-tile">ðŸŸ¡ <div class="tile-label">Social</div></div>
      <div class="iphone-tile">ðŸ”µ <div class="tile-label">Medicaid</div></div>
      <div class="iphone-tile">ðŸŸ  <div class="tile-label">Housing</div></div>
      <div class="iphone-tile">âš« <div class="tile-label">SNAP</div></div>

      <!-- Approval Ratings -->
      <div class="iphone-tile chart-tile">
        <canvas id="approvalChart" class="weeble"></canvas>
      </div>

      <!-- Market tiles -->
      <div class="iphone-tile market-tile">
        <div class="tile-label">Cattle</div>
        <div id="market-cattle">Loadingâ€¦</div>
      </div>
      <div class="iphone-tile market-tile">
        <div class="tile-label">Hogs</div>
        <div id="market-hogs">Loadingâ€¦</div>
      </div>
      <div class="iphone-tile market-tile">
        <div class="tile-label">Corn</div>
        <div id="market-corn">Loadingâ€¦</div>
      </div>
      <div class="iphone-tile market-tile">
        <div class="tile-label">Soybeans</div>
        <div id="market-soy">Loadingâ€¦</div>
      </div>

      <!-- Congress tile -->
      <div class="iphone-tile congress-tile" id="congressTile">
        <div class="tile-label">Congress Directory</div>
      </div>

      <!-- Federal Agencies tile -->
      <div class="iphone-tile agencies-tile" id="agenciesTile">
        <div class="tile-label">Federal Agencies</div>
      </div>

      <!-- Official Registers tile -->
      <div class="iphone-tile registers-tile" id="registersTile">
        <div class="tile-label">Official Registers</div>
      </div>
    </div>

    <!-- Congress Directory -->
    <section class="congress hidden" id="congress">
      <h2>Members of Congress â€” Live Directory</h2>
      <div class="controls">
        <input id="filterText" type="search" placeholder="Search name, state, party" aria-label="Filter" />
        <select id="filterChamber" aria-label="Chamber">
          <option value="">All Chambers</option>
          <option value="House">House</option>
          <option value="Senate">Senate</option>
        </select>
        <select id="filterState" aria-label="State"></select>
      </div>
      <div id="congressNote" style="color: var(--muted); font-size:13px; margin-bottom:6px"></div>
      <div style="overflow:auto">
        <table id="congressTable" aria-live="polite">
          <thead>
            <tr>
              <th>Name</th>
              <th>Chamber</th>
              <th>State/Dist.</th>
              <th>Party</th>
              <th>Term Ends</th>
              <th>Days Left</th>
              <th>Profile</th>
            </tr>
          </thead>
          <tbody><tr><td colspan="7" style="color:var(--muted)">Loadingâ€¦</td></tr></tbody>
        </table>
      </div>
    </section>

    <!-- Federal Agencies -->
    <section class="block hidden" id="agencies">
      <h3>Federal Agencies</h3>
      <a href="https://www.cms.gov/" target="_blank">CMS</a>
      <a href="https://www.hud.gov/" target="_blank">HUD</a>
      <a href="https://www.usda.gov/" target="_blank">USDA</a>
      <a href="https://www.ssa.gov/" target="_blank">SSA</a>
    </section>

    <!-- Official Registers -->
    <section class="block hidden" id="registers">
      <h3>Official Registers</h3>
      <a href="https://www.federalregister.gov/" target="_blank">Federal Register</a>
      <a href="https://www.congress.gov/" target="_blank">Congress</a>
      <a href="https://www.govinfo.gov/" target="_blank">GovInfo</a>
    </section>
  </main>

  <!-- Footer -->
  <footer>
    <div class="footer-text">Â© 2025 NetWatch â€¢ Atlanta, Georgia 30303</div>
    <div class="swipe-bar"></div>
  </footer>

  <!-- Scripts -->
  <script src="app.js"></script>
  <script src="weather.js"></script>
  <script src="market.js"></script>
  <script src="approval.js"></script>

  <!-- Clock & Toggles -->
  <script>
    const canvas = document.getElementById("appleClock");
    const ctx = canvas.getContext("2d");
    canvas.width = 200;
    canvas.height = 200;

    function drawClock() {
      const now = new Date();
      const radius = canvas.width / 2;
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      ctx.save();
      ctx.translate(radius, radius);

      // Glassy background
      ctx.beginPath();
      ctx.arc(0, 0, radius-5, 0, 2*Math.PI);
      ctx.fillStyle = "rgba(255,255,255,0.25)";
      ctx.fill();
      ctx.strokeStyle = "rgba(0,0,0,0.3)";
      ctx.lineWidth = 2;
      ctx.stroke();

      // Logo
      const logo = new Image();
      logo.src = "logo.png";
      const logoSize = radius * 0.8;
      ctx.globalAlpha = 0.9;
      ctx.drawImage(logo, -logoSize/2, -logoSize/2, logoSize, logoSize);
      ctx.globalAlpha = 1.0;

      // Numbers
      ctx.font = "14px SF Pro Display, sans-serif";
      ctx.textAlign = "center";
      ctx.textBaseline = "middle";
      ctx.fillStyle = "#000";
      for (let num = 1; num <= 12; num++) {
        const ang = num * Math.PI / 6;
        ctx.rotate(ang);
        ctx.translate(0, -radius + 25);
        ctx.rotate(-ang);
        ctx.fillText(num.toString(), 0, 0);
        ctx.rotate(ang);
        ctx.translate(0, radius - 25);
        ctx.rotate(-ang);
      }

      // Hands
      let sec = now.getSeconds();
      let min = now.getMinutes();
      let hr  = now.getHours();

      hr = hr % 12;
      hr = (hr * Math.PI / 6) + (min * Math.PI / (6*60));
      min = (min * Math.PI / 30) + (sec * Math.PI / (30*60));
      sec = sec * Math.PI / 30;

      // Hour
      ctx.beginPath();
      ctx.moveTo(0,0);
      ctx.lineTo(radius*0.5*Math.cos(hr-Math.PI/2), radius*0.5*Math.sin(hr-Math.PI/2));
      ctx.lineWidth = 4;
      ctx.stroke();

      // Minute
      ctx.beginPath();
      ctx.moveTo(0,0);
      ctx.lineTo(radius*0.7*Math.cos(min-Math.PI/2), radius*0.7*Math.sin(min-Math.PI/2));
      ctx.lineWidth = 3;
      ctx.stroke();

      // Second
      ctx.beginPath();
      ctx.moveTo(0,0);
      ctx.lineTo(radius*0.8*Math.cos(sec-Math.PI/2), radius*0.8*Math.sin(sec-Math.PI/2));
      ctx.strokeStyle = "red";
      ctx.lineWidth = 2;
      ctx.stroke();
      ctx.strokeStyle = "#000";

      ctx.restore();
    }

    setInterval(drawClock, 1000);

    // Toggle panels
    function setupToggle(tileId, sectionId) {
      const tile = document.getElementById(tileId);
      const section = document.getElementById(sectionId);
      tile.addEventListener("click", () => {
        section.classList.toggle("hidden");
        if (!section.classList.contains("hidden")) {
          section.scrollIntoView({ behavior: "smooth" });
        }
      });
    }

    setupToggle("congressTile", "congress");
    setupToggle("agenciesTile", "agencies");
    setupToggle("registersTile", "registers");
  </script>
</body>
</html>
